"use strict";(self.webpackChunkfailean_client=self.webpackChunkfailean_client||[]).push([[293],{7293:function(e,n,t){t.r(n),t.d(n,{default:function(){return ie}});var r=t(3433),i=t(1413),a=t(9439),o=t(4165),s=t(5861),c=t(2791),l=t(1234),u=t(658),d=function(e){return e?e.replace(/([A-Z])/g," $1").charAt(0).toUpperCase()+e.replace(/([A-Z])/g," $1").slice(1):"NO STRING"},p=t(184),m=(0,c.createContext)({currentIdeaID:"",setCurrentIdeaID:void 0,graph:[],loaded:"",fetchGraph:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fetchOneResult:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setPolled:void 0,polled:[]}),h=function(e){var n,t=e.children,h=(0,c.useContext)(l.J),x=null===h||void 0===h?void 0:h.axiosInstance,f=(0,c.useContext)(u.Z),v=f.ideas,Z=f.refreshUserData,g=(0,c.useState)([]),j=(0,a.Z)(g,2),w=j[0],P=j[1],I=(0,c.useState)((null===(n=v[0])||void 0===n?void 0:n._id)||""),S=(0,a.Z)(I,2),k=S[0],b=S[1],C=(0,c.useState)(""),y=(0,a.Z)(C,2),D=y[0],R=y[1],N=(0,c.useState)([]),A=(0,a.Z)(N,2),E=A[0],O=A[1],z=(0,c.useCallback)((0,s.Z)((0,o.Z)().mark((function e(){var n,t,r,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("fetchGraph"),e.prev=1,!x){e.next=18;break}return e.next=5,x.get("data/prompts/getPromptGraph");case 5:return n=e.sent,t=n.data,r=t.graph,R("graph"),P([]),e.next=12,x.post("data/prompts/getPromptResult",{ideaID:k,promptName:"all"});case 12:(a=e.sent.data.promptResult).sort((function(e,n){return new Date(n.updatedAt).getTime()-new Date(e.updatedAt).getTime()})),s={},a.forEach((function(e){(!s[e.promptName]||new Date(e.updatedAt).getTime()>new Date(s[e.promptName].updatedAt).getTime())&&(s[e.promptName]=e.data)})),P(r.map((function(e,n){return(0,i.Z)((0,i.Z)({},e),{},{result:0===n?"idea":s[e.name]||"empty"})}))),R("");case 18:e.next=22;break;case 20:e.prev=20,e.t0=e.catch(1);case 22:case"end":return e.stop()}}),e,null,[[1,20]])}))),[x,k]),M=(0,c.useCallback)(function(){var e=(0,s.Z)((0,o.Z)().mark((function e(n){var t,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O((function(e){return(0,r.Z)(new Set(e))})),e.prev=1,!x){e.next=22;break}return R(d(n)),e.next=6,x.post("data/prompts/getPromptResult",{ideaID:k,promptName:n});case 6:if(e.t2=t=e.sent.data,e.t1=null===e.t2,e.t1){e.next=10;break}e.t1=void 0===t;case 10:if(!e.t1){e.next=14;break}e.t3=void 0,e.next=15;break;case 14:e.t3=null===(a=t.promptResult)||void 0===a?void 0:a.data;case 15:if(e.t0=e.t3,e.t0){e.next=18;break}e.t0="empty";case 18:(s=e.t0).length>2&&"empty"!==s&&O((function(e){return e.filter((function(e){return e!==n}))})),P((function(e){return e.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{result:s})}))})),R("");case 22:e.next=27;break;case 24:e.prev=24,e.t4=e.catch(1),console.log(e.t4);case 27:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(n){return e.apply(this,arguments)}}(),[x,k]);return(0,c.useEffect)((function(){z(),Z();var e=setInterval((function(){return E.forEach((function(e){return M(e)}))}),5e3);return function(){return clearInterval(e)}}),[z,M,E,Z]),(0,p.jsx)(m.Provider,{value:{currentIdeaID:k,setCurrentIdeaID:b,graph:w,loaded:D,fetchGraph:z,fetchOneResult:M,setPolled:O,polled:E},children:t})},x=m,f=t(1889),v=t(4554),Z=t(890),g=t(6151),j=t(3768),w=t(5527),P=t(1323),I=function(e){var n=e.level,t=e.setOpenPrompt,r=d(n.name);return n.locked?(0,p.jsx)(j.Z,{title:"The dependencies:"+n.missingDeps.map((function(e){return" "+d(e)}))+" are empty",children:(0,p.jsx)(P.tT,{children:r})}):(0,p.jsx)(P.bU,{onClick:function(){return t(n.name)},children:r})},S=t(9218),k=t(5289),b=t(9201),C=(0,b.Z)((0,p.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh"),y=(0,b.Z)((0,p.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning"),D=(0,b.Z)((0,p.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"}),"Feedback"),R=t(5683),N=t(3366),A=t(7462),E=t(8182),O=t(4419),z=t(6934),M=t(1402),T=t(5878),_=t(1217);function G(e){return(0,_.Z)("MuiDialogActions",e)}(0,T.Z)("MuiDialogActions",["root","spacing"]);var L=["className","disableSpacing"],W=(0,z.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,!t.disableSpacing&&n.spacing]}})((function(e){var n=e.ownerState;return(0,A.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!n.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),V=c.forwardRef((function(e,n){var t=(0,M.Z)({props:e,name:"MuiDialogActions"}),r=t.className,i=t.disableSpacing,a=void 0!==i&&i,o=(0,N.Z)(t,L),s=(0,A.Z)({},t,{disableSpacing:a}),c=function(e){var n=e.classes,t={root:["root",!e.disableSpacing&&"spacing"]};return(0,O.Z)(t,G,n)}(s);return(0,p.jsx)(W,(0,A.Z)({className:(0,E.Z)(c.root,r),ownerState:s,ref:n},o))})),F=t(9157),H=t(5661),J=t(9823),U=t(9397),B=t(5985),$=function(e){var n=e.idea,t=e.promptName,r=e.setOpenPrompt,u=e.setOpenDialog,m=e.setPrice,h=(0,U.Z)(),x=h.theme,j=h.isMobile,w=(0,c.useContext)(l.J),P=null===w||void 0===w?void 0:w.axiosInstance,I=(0,c.useState)(""),b=(0,a.Z)(I,2),N=b[0],A=b[1],E=(0,c.useState)(""),O=(0,a.Z)(E,2),z=O[0],M=O[1],T=(0,c.useState)("60vh"),_=(0,a.Z)(T,2),G=_[0],L=_[1],W=(0,c.useState)("Run Prompt"),$=(0,a.Z)(W,2),X=$[0],q=$[1],K=(0,c.useState)("Save Current Text as Prompt Result"),Q=(0,a.Z)(K,2),Y=Q[0],ee=Q[1],ne=(0,c.useCallback)((0,s.Z)((0,o.Z)().mark((function e(){var r,i,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P||"NO IDEAS"===n||"idea"===t){e.next=8;break}return e.next=3,P.post("data/prompts/getPromptResult",{ideaID:null===n||void 0===n?void 0:n._id,promptName:t});case 3:i=e.sent,a=i.data,s=(null===(r=a.promptResult)||void 0===r?void 0:r.data)||"",A(s),M(s);case 8:case"end":return e.stop()}}),e)}))),[P,n,t]);(0,c.useEffect)((function(){ne()}),[ne]);var te=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q("Estimating cost..."),r=9999,!P){e.next=15;break}return e.prev=3,e.next=6,P.post("data/prompts/preRunPrompt",{ideaID:"NO IDEAS"!==n&&(null===n||void 0===n?void 0:n._id),promptNames:[t]});case 6:r=e.sent.data.price,m(r),u("run"),q("Run Prompt"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),q("Run Prompt");case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee("Trying to save..."),e.prev=1,!P){e.next=7;break}return e.next=5,P.post("data/prompts/savePromptResult",{ideaID:"NO IDEAS"!==n&&n._id,promptName:t,data:z,reason:"save"});case 5:ee("Save Current Text as Prompt Result"),ne();case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),B.Am.error("Error while saving!!!"),ee("Save Current Text as Prompt Result");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){return r("closed")},ae=(0,c.useRef)(null),oe=(0,c.useRef)(null);return(0,c.useEffect)((function(){var e=function(){var e;if(null===(e=ae.current)||void 0===e?void 0:e.clientHeight){var n=window.innerHeight-64-100;L("".concat(n,"px"))}};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[z]),(0,p.jsxs)(k.Z,{open:!0,style:{zIndex:10},maxWidth:"xl",PaperProps:{sx:(0,i.Z)({height:"calc(88vh - 64px)",marginTop:"calc(4vh + 64px)"},j?{width:"90vw"}:{width:"calc(92vw - 240px)",marginLeft:"calc(2vw + 240px)"}),ref:ae},onClose:ie,children:[(0,p.jsx)(H.Z,{children:(0,p.jsxs)(f.ZP,{container:!0,direction:j?"column-reverse":"row",rowSpacing:2,justifyContent:"space-between",alignItems:"center",children:[(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsxs)(g.Z,{color:"secondary",variant:"outlined",onClick:ne,children:[(0,p.jsx)(C,{sx:{mr:1}}),"Reload Last Saved Result"]})}),(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsxs)(g.Z,{color:"secondary",onClick:ie,variant:"outlined",sx:{borderColor:"red",color:"red"},children:[(0,p.jsx)(J.Z,{sx:{color:"red",mr:1}}),"Close"]})})]})}),(0,p.jsx)(F.Z,{children:(0,p.jsxs)(f.ZP,{container:!0,direction:"column",rowSpacing:2,alignItems:"center",wrap:"nowrap",children:[(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsx)(Z.Z,{variant:"h5",color:x.palette.primary.main,children:d(t)})}),(0,p.jsx)(f.ZP,{item:!0,paddingBottom:"1%",children:(0,p.jsx)(S.Z,{ref:oe,multiline:!0,maxRows:1e3,variant:"filled",sx:{width:j?"80vw":"60vw",height:"calc(".concat(G," - ").concat(j?490:260,"px)"),overflow:"auto"},onChange:function(e){return M(e.target.value)},value:"NO IDEAS"===n?"Create your first Ideas to validate it with AI":"idea"===t?n.idea:z,disabled:"NO IDEAS"===n||"idea"===t})}),z!==N&&(0,p.jsx)(f.ZP,{item:!0,paddingBottom:"1%",children:(0,p.jsxs)(v.Z,{display:"flex",alignItems:"center",children:[(0,p.jsx)(y,{sx:{color:"warning.main",mr:1}}),(0,p.jsx)(Z.Z,{color:"warning.main",children:"unsaved changes"})]})}),(0,p.jsxs)(f.ZP,{item:!0,container:!0,direction:j?"column":"row",justifyContent:"center",alignItems:"center",columnSpacing:2,rowSpacing:2,children:[(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsxs)(g.Z,{color:"secondary",variant:"outlined",disabled:"NO IDEAS"===n||!t||"idea"===t||"Run Prompt"!==X,onClick:function(){return!(!t||"idea"===t)&&te()},children:[(0,p.jsx)(C,{sx:{mr:1}}),X]})}),(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsxs)(g.Z,{color:"secondary",variant:"outlined",disabled:"NO IDEAS"===n||!t||"idea"===t,onClick:function(){return!(!t||"idea"===t)&&u("feedback")},children:[(0,p.jsx)(D,{sx:{mr:1}})," Provide feedback and run prompt"]})}),(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsxs)(g.Z,{color:"secondary",variant:"outlined",disabled:"NO IDEAS"===n||!t||"idea"===t||"Save Current Text as Prompt Result"!==Y,onClick:function(){return!(!t||"idea"===t)&&re()},children:[(0,p.jsx)(R.Z,{sx:{mr:1}})," ",Y]})})]})]})}),(0,p.jsx)(V,{})]})},X=t(9321),q=t(3903),K=function(e){var n=e.selectedIdeaID,t=e.setSelectedIdeaID,r=e.label,i=e.fontSizeFactor,o=(0,c.useContext)(u.Z).ideas,s=(0,c.useState)(!1),l=(0,a.Z)(s,2),d=l[0],m=l[1],h=(0,p.jsx)(X.Z,{open:d,onOpen:function(){return m(!0)},onClose:function(){return m(!1)},value:n,onChange:function(e){return t(e.target.value)},style:{minWidth:"200px",maxWidth:"70vw"},children:o.map((function(e,n){return(0,p.jsx)(q.Z,{value:e._id,style:{whiteSpace:"nowrap",overflowX:"auto",maxWidth:"70vw"},children:null===e||void 0===e?void 0:e.idea},n)}))});return(0,p.jsxs)(f.ZP,{item:!0,container:!0,direction:"row",justifyContent:"center",alignItems:"center",columnSpacing:4,wrap:"nowrap",children:[null!==r&&(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsx)(Z.Z,{sx:{fontSize:"".concat(i||150,"%")},children:r||"Idea:"})}),(0,p.jsx)(f.ZP,{item:!0,children:h})]})},Q=(0,b.Z)((0,p.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock"),Y=(0,b.Z)((0,p.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen"),ee=(0,b.Z)((0,p.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),ne=function(e){var n=e.idea,t=e.promptName,r=e.setOpenDialog,i=e.price,a=(0,U.Z)(),u=a.theme,m=a.isMobile,h=(0,c.useContext)(l.J),v=null===h||void 0===h?void 0:h.axiosInstance,j=(0,c.useContext)(x).setPolled,w=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!v){e.next=8;break}return e.next=4,v.post("data/prompts/runAndGetPromptResult",{ideaID:"NO IDEAS"!==n&&(null===n||void 0===n?void 0:n._id),promptNames:t[0].length&&t[0].length>2?t:[t]});case 4:j&&j((function(e){return(t[0].length&&t[0].length>2?t:[t]).forEach((function(n){return"idea"!==n&&e.push(n)})),e})),r("closed"),e.next=9;break;case 8:throw new Error("No axios instance");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),B.Am.error(e.t0.response.data.clientMessage);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),P=function(){return r("closed")};return(0,p.jsxs)(k.Z,{open:!0,style:{zIndex:20},maxWidth:"xl",PaperProps:{sx:{width:m?"80vw":"60vw"}},onClose:P,children:[(0,p.jsx)(H.Z,{children:(0,p.jsx)(f.ZP,{container:!0,width:"\xa70%",direction:m?"column-reverse":"row",rowSpacing:2,justifyContent:"space-between",alignItems:"center",children:(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsxs)(g.Z,{color:"secondary",onClick:P,variant:"outlined",sx:{borderColor:"red",color:"red"},children:[(0,p.jsx)(J.Z,{sx:{color:"red",mr:1}}),"Cancel"]})})})}),(0,p.jsx)(F.Z,{children:(0,p.jsxs)(f.ZP,{container:!0,direction:"column",rowSpacing:2,alignItems:"center",wrap:"nowrap",children:[(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsx)(Z.Z,{variant:"h4",color:u.palette.primary.main,children:d(t[0].length&&t[0].length>2?"MultiPrompt Run":t)})}),(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsxs)(Z.Z,{variant:"h6",textAlign:"center",children:["Estimated cost: ",i," tokens"]})}),(0,p.jsx)(f.ZP,{item:!0,container:!0,direction:m?"column":"row",justifyContent:"center",alignItems:"center",columnSpacing:2,rowSpacing:2,children:(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsxs)(g.Z,{color:"secondary",variant:"outlined",disabled:"NO IDEAS"===n||!t||"idea"===t,onClick:function(){return!(!t||"idea"===t)&&w()},children:[(0,p.jsx)(ee,{sx:{mr:1}}),"Run"]})})})]})}),(0,p.jsx)(V,{})]})},te=function(e){var n=e.idea,t=e.promptName,r=e.setOpenDialog,i=(0,U.Z)(),u=i.theme,m=i.isMobile,h=(0,c.useContext)(l.J),v=null===h||void 0===h?void 0:h.axiosInstance,j=(0,c.useState)(""),w=(0,a.Z)(j,2),P=w[0],I=w[1],b=(0,c.useState)("Prepare Feedback"),C=(0,a.Z)(b,2),y=C[0],D=C[1],R=(0,c.useState)(999999),N=(0,a.Z)(R,2),A=N[0],E=N[1],O=(0,c.useState)(!1),z=(0,a.Z)(O,2),M=z[0],T=z[1],_=(0,c.useContext)(x).setPolled,G=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D("Estimating cost..."),r=99999,!v){e.next=17;break}return e.prev=3,e.next=6,v.post("data/prompts/preRunPrompt",{ideaID:"NO IDEAS"!==n&&(null===n||void 0===n?void 0:n._id),promptNames:[t]});case 6:r=e.sent.data.price,E(r),D("Prepare Feedback"),T(!0),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(3),E(r),D("Prepare Feedback"),T(!0);case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v&&v.post("data/prompts/runAndGetPromptResult",{ideaID:"NO IDEAS"!==n&&(null===n||void 0===n?void 0:n._id),feedback:P,promptNames:t[0].length&&t[0].length>2?t:[t]}),_&&_((function(e){return(t[0].length&&t[0].length>2?t:[t]).forEach((function(n){return"idea"!==n&&e.push(n)})),e})),r("closed");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){return r("closed")};return(0,p.jsxs)(k.Z,{open:!0,style:{zIndex:20},maxWidth:"xl",PaperProps:{sx:{width:m?"80vw":"60vw"}},onClose:W,children:[(0,p.jsx)(H.Z,{children:(0,p.jsx)(f.ZP,{container:!0,width:"\xa70%",direction:m?"column-reverse":"row",rowSpacing:2,justifyContent:"space-between",alignItems:"center",children:(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsxs)(g.Z,{color:"secondary",onClick:W,variant:"outlined",sx:{borderColor:"red",color:"red"},children:[(0,p.jsx)(J.Z,{sx:{color:"red",mr:1}}),"Cancel"]})})})}),(0,p.jsx)(F.Z,{children:(0,p.jsxs)(f.ZP,{container:!0,direction:"column",rowSpacing:2,alignItems:"center",wrap:"nowrap",children:[(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsx)(Z.Z,{variant:"h4",color:u.palette.primary.main,children:d(t[0].length&&t[0].length>2?"MultiPrompt Run":t)})}),(0,p.jsxs)(f.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",columnSpacing:2,children:[(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsx)(Z.Z,{variant:"h6",children:"Feedback:"})}),(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsx)(S.Z,{fullWidth:!0,multiline:!0,value:P,onChange:function(e){T(!1),I(e.target.value)}})})]}),999999!==A&&(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsxs)(Z.Z,{variant:"h6",textAlign:"center",children:["Estimated cost: ",A," tokens"]})}),(0,p.jsxs)(f.ZP,{item:!0,container:!0,direction:"column",justifyContent:"center",alignItems:"center",columnSpacing:2,rowSpacing:2,children:[(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsxs)(g.Z,{color:"secondary",variant:"outlined",disabled:"NO IDEAS"===n||!t||"idea"===t||!P,onClick:function(){return!(!t||"idea"===t)&&G()},children:[(0,p.jsx)(ee,{sx:{mr:1}}),y]})}),(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsxs)(g.Z,{color:"secondary",variant:"outlined",disabled:"NO IDEAS"===n||!t||"idea"===t||!M,onClick:function(){return!(!t||"idea"===t)&&L()},children:[(0,p.jsx)(ee,{sx:{mr:1}}),"Run"]})})]})]})}),(0,p.jsx)(V,{})]})},re=function(){var e=(0,c.useContext)(l.J),n=null===e||void 0===e?void 0:e.axiosInstance,t=(0,c.useContext)(u.Z).ideas,r=(0,c.useContext)(x),m=r.currentIdeaID,h=r.setCurrentIdeaID,P=r.graph,S=r.loaded,k=r.polled,b=(0,c.useState)("closed"),C=(0,a.Z)(b,2),D=C[0],R=C[1],N=(0,c.useState)("closed"),A=(0,a.Z)(N,2),E=A[0],O=A[1],z=(0,c.useState)(999999),M=(0,a.Z)(z,2),T=M[0],_=M[1],G=(0,c.useState)("Run All"),L=(0,a.Z)(G,2),W=L[0],V=L[1],F=(0,c.useState)("Run Missing"),H=(0,a.Z)(F,2),J=H[0],U=H[1],B=(0,c.useState)("Run Group"),X=(0,a.Z)(B,2),q=X[0],ee=X[1],re=(0,c.useState)([]),ie=(0,a.Z)(re,2),ae=ie[0],oe=ie[1];(0,c.useEffect)((function(){P.length>0&&oe(P.map((function(e){var n=e.name,t=e.result;return"empty"===t||"One of the dependencies or feedback is invalid, please try to change it"===t?n:(null===t||void 0===t?void 0:t.length)>2?null:n})).filter((function(e){return e})))}),[P]);return(0,p.jsxs)(p.Fragment,{children:["closed"!==D&&!(D[0].length&&D[0].length>2)&&(0,p.jsx)($,{idea:t.find((function(e){return e._id===m}))||"NO IDEAS",promptName:D,setOpenPrompt:R,setOpenDialog:O,setPrice:_}),"closed"!==E&&("run"===E?(0,p.jsx)(ne,{idea:t.find((function(e){return e._id===m}))||"NO IDEAS",promptName:D,setOpenDialog:O,price:T}):(0,p.jsx)(te,{idea:t.find((function(e){return e._id===m}))||"NO IDEAS",promptName:D,setOpenDialog:O})),(0,p.jsxs)(f.ZP,{container:!0,direction:"column",rowSpacing:4,alignItems:"center",children:[h&&(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsx)(K,{selectedIdeaID:m,setSelectedIdeaID:h})}),(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsx)(w.Z,{sx:{overflow:"scroll"},children:P.length>0?function(e){var t,r,a=e.map((function(n){var t,r=null===(t=e.find((function(e){return e.name===n.name})))||void 0===t?void 0:t.deps.filter((function(n){var t,r=e.find((function(e){return e.name===n}));return"idea"!==(null===r||void 0===r?void 0:r.name)&&("empty"===(null===r||void 0===r?void 0:r.result)||"One of the dependencies or feedback is invalid, please try to change it"===(null===r||void 0===r?void 0:r.result)||!((null===r||void 0===r||null===(t=r.result)||void 0===t?void 0:t.length)>2))}));return(0,i.Z)((0,i.Z)({},n),{},{missingDeps:r,locked:r&&r.length>0})})),c=[],l=a.reduce((function(e,n){return e[n.level]||(e[n.level]=[]),e[n.level].push(n),e}),{});for(var u in l)l.hasOwnProperty(u)&&(c.push({level:l[u],lockedPrompts:t?l[u].filter((function(e){return e.locked})):[]}),t=u);return(0,p.jsxs)(f.ZP,{container:!0,direction:"column",rowSpacing:10,alignItems:"center",children:[k.length>0&&(0,p.jsxs)(f.ZP,{item:!0,container:!0,direction:"column",rowSpacing:4,alignItems:"center",children:[(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsxs)(v.Z,{display:"flex",alignItems:"center",children:[(0,p.jsx)(y,{sx:{color:"warning.main",mr:1}}),(0,p.jsx)(Z.Z,{color:"warning.main",children:"These prompts are now running:"})]})}),(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsx)(Z.Z,{color:"warning.main",textAlign:"center",children:(r=k.map((function(e){return", "+d(e)})).join(""),r.startsWith(", Idea, ")?r.slice(8):r.startsWith(", ")?r.slice(2):r)})})]}),(0,p.jsxs)(f.ZP,{item:!0,container:!0,columnSpacing:6,justifyContent:"center",alignItems:"center",children:[(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsx)(g.Z,{color:"secondary",variant:"outlined",disabled:"Run All"!==W,onClick:(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V("Estimating cost..."),t=9999,!n){e.next=16;break}return e.prev=3,e.next=6,n.post("data/prompts/preRunPrompt",{ideaID:m,promptNames:a.map((function(e){return e.name}))});case 6:t=e.sent.data.price,R(a.map((function(e){return e.name}))),_(t),O("run"),V("Run All"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),V("Run All");case 16:case"end":return e.stop()}}),e,null,[[3,13]])}))),children:W})}),(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsx)(g.Z,{color:"secondary",variant:"outlined",disabled:"Run Missing"!==J||0===ae.length,onClick:(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U("Estimating cost..."),t=9999,!n){e.next=16;break}return e.prev=3,e.next=6,n.post("data/prompts/preRunPrompt",{ideaID:m,promptNames:ae});case 6:t=e.sent.data.price,R(ae),_(t),O("run"),U("Run Missing"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),U("Run Missing");case 16:case"end":return e.stop()}}),e,null,[[3,13]])}))),children:J})})]}),c.map((function(e,t){var r=e.level,i=e.lockedPrompts;return(0,p.jsxs)(f.ZP,{item:!0,container:!0,justifyContent:"center",columnSpacing:3,children:[(0,p.jsx)(f.ZP,{item:!0,children:i.length===r.length?(0,p.jsx)(j.Z,{title:"All the prompts in this group are locked",children:(0,p.jsx)(Q,{})}):i.length>0?(0,p.jsx)(j.Z,{title:"The promtps:"+i.map((function(e){var n=e.name;return" "+d(n)}))+" are locked",children:(0,p.jsx)(Y,{})}):1!==r.length&&(0,p.jsx)(g.Z,{color:"secondary",variant:"outlined",disabled:"Run Group"!==q,onClick:(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee("Estimating cost..."),t=9999,!n){e.next=16;break}return e.prev=3,e.next=6,n.post("data/prompts/preRunPrompt",{ideaID:m,promptNames:r.map((function(e){return e.name}))});case 6:t=e.sent.data.price,R(r.map((function(e){return e.name}))),_(t),O("run"),ee("Run Group"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),ee("Run Group");case 16:case"end":return e.stop()}}),e,null,[[3,13]])}))),children:q})}),r.map((function(e,n){return(0,p.jsx)(f.ZP,{item:!0,children:(0,p.jsx)(I,{level:e,setOpenPrompt:R})},n)}))]},t)}))]})}(P):(0,p.jsxs)(Z.Z,{children:["Loading ",S,"..."]})})})]})]})},ie=function(){return(0,p.jsx)(h,{children:(0,p.jsx)(re,{})})}},9823:function(e,n,t){var r=t(4836);n.Z=void 0;var i=r(t(5649)),a=t(184),o=(0,i.default)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");n.Z=o}}]);
//# sourceMappingURL=293.56496e21.chunk.js.map